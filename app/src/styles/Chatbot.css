
          @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
          }
          .error-page {
            min-height: 100vh;
            padding: 5.5rem 1.5rem 3rem;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #7f1d1d 100%);
            display: flex;
            align-items: center;
            justify-content: center;
          }
          .error-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
            backdrop-filter: blur(30px);
            border-radius: 2rem;
            padding: 3rem;
            box-shadow: 0 25px 60px rgba(15, 23, 42, 0.3);
            max-width: 600px;
            text-align: center;
            border: 2px solid rgba(239, 68, 68, 0.3);
          }
          .error-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: float 2s ease-in-out infinite;
          }
          .error-text {
            color: #dc2626;
            font-size: 1.2rem;
            font-weight: 600;
            line-height: 1.6;
          }
        


          .loading-page {
            min-height: 100vh;
            padding: 5.5rem 1.5rem 3rem;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #1d4ed8 100%);
            display: flex;
            align-items: center;
            justify-content: center;
          }
          .loading-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));
            backdrop-filter: blur(30px);
            border-radius: 2rem;
            padding: 3rem;
            box-shadow: 0 25px 60px rgba(15, 23, 42, 0.3);
            max-width: 600px;
            text-align: center;
          }
          .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(59, 130, 246, 0.2);
            border-top-color: #3b82f6;
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            animation: spin 1s linear infinite;
          }
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
          .loading-text {
            color: #0f172a;
            font-size: 1.2rem;
            font-weight: 600;
          }
        


        @keyframes chatFadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes chatSlideIn {
          from {
            opacity: 0;
            transform: translateX(-20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }

        @keyframes progressPulse {
          0%, 100% {
            box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4);
          }
          50% {
            box-shadow: 0 0 0 8px rgba(37, 99, 235, 0);
          }
        }

        @keyframes typingIndicator {
          0%, 60%, 100% {
            transform: translateY(0);
            opacity: 0.7;
          }
          30% {
            transform: translateY(-10px);
            opacity: 1;
          }
        }

        @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }

        @keyframes shimmer {
          0% { background-position: -1000px 0; }
          100% { background-position: 1000px 0; }
        }

        @keyframes float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-5px); }
        }

        .chat-page {
          min-height: 100vh;
          padding: 5.5rem 1.5rem 3rem;
          background: linear-gradient(
            135deg,
            #0f172a 0%,
            #1e293b 25%,
            #1d4ed8 50%,
            #111827 75%,
            #020617 100%
          );
          background-size: 400% 400%;
          animation: gradientShift 20s ease infinite;
          position: relative;
          overflow-x: hidden;
        }

        .chat-page::before {
          content: '';
          position: absolute;
          inset: 0;
          background: radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
                      radial-gradient(circle at 80% 70%, rgba(34, 197, 94, 0.1) 0%, transparent 50%);
          pointer-events: none;
        }

        .chat-container {
          max-width: 1400px;
          margin: 0 auto;
          display: grid;
          grid-template-columns: 1.8fr 1fr;
          gap: 2rem;
          position: relative;
          z-index: 1;
        }

        @media (max-width: 1200px) {
          .chat-container {
            grid-template-columns: 1fr;
          }
        }

        .back-button {
          display: inline-flex;
          align-items: center;
          gap: 0.6rem;
          padding: 0.7rem 1.5rem;
          margin-bottom: 2rem;
          background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.12),
            rgba(255, 255, 255, 0.08)
          );
          backdrop-filter: blur(20px) saturate(180%);
          border: 2px solid rgba(255, 255, 255, 0.2);
          border-radius: 999px;
          color: #e2e8f0;
          font-weight: 600;
          font-size: 0.95rem;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 
            0 8px 20px rgba(0, 0, 0, 0.2),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
          text-decoration: none;
          position: relative;
          overflow: hidden;
          animation: chatFadeIn 0.6s ease-out;
        }

        .back-button::before {
          content: '';
          position: absolute;
          inset: 0;
          background: linear-gradient(
            135deg,
            rgba(59, 130, 246, 0.2),
            rgba(34, 197, 94, 0.15)
          );
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .back-button:hover {
          transform: translateY(-2px) translateX(-3px);
          background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.18),
            rgba(255, 255, 255, 0.12)
          );
          border-color: rgba(59, 130, 246, 0.4);
          box-shadow: 
            0 12px 30px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .back-button:hover::before {
          opacity: 1;
        }

        .back-button:active {
          transform: translateY(0) translateX(-1px);
        }

        .back-button-icon {
          font-size: 1.2rem;
          position: relative;
          z-index: 1;
          transition: transform 0.3s ease;
        }

        .back-button:hover .back-button-icon {
          transform: translateX(3px);
        }

        .back-button-text {
          position: relative;
          z-index: 1;
          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .chat-header {
          margin-bottom: 1.5rem;
          animation: chatFadeIn 0.6s ease-out;
        }

        .chat-title {
          font-size: 2.5rem;
          font-weight: 900;
          margin-bottom: 0.5rem;
          line-height: 1.2;
          background: linear-gradient(135deg, #ffffff 0%, #e0e7ff 50%, #c7d2fe 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          letter-spacing: -0.02em;
        }

        .chat-subtitle {
          font-size: 1.1rem;
          color: #cbd5e1;
          font-weight: 400;
          line-height: 1.6;
        }

        .progress-container {
          margin-bottom: 1.5rem;
          animation: chatFadeIn 0.6s ease-out 0.2s both;
        }

        .progress-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 0.6rem;
          font-size: 0.95rem;
          font-weight: 600;
        }

        .progress-label {
          color: #e2e8f0;
          text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .progress-percent {
          color: #60a5fa;
          font-weight: 700;
          font-size: 1.05rem;
          text-shadow: 0 0 12px rgba(96, 165, 250, 0.5);
        }

        .progress-bar-wrapper {
          width: 100%;
          height: 10px;
          border-radius: 999px;
          background: rgba(15, 23, 42, 0.6);
          backdrop-filter: blur(10px);
          overflow: hidden;
          box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
          border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .progress-bar-fill {
          height: 100%;
          background: linear-gradient(90deg, #2563eb, #3b82f6, #60a5fa);
          border-radius: 999px;
          transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          overflow: hidden;
          box-shadow: 0 0 20px rgba(37, 99, 235, 0.6);
        }

        .progress-bar-fill::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          bottom: 0;
          right: 0;
          background: linear-gradient(
            90deg,
            transparent,
            rgba(255, 255, 255, 0.3),
            transparent
          );
          animation: shimmer 2s infinite;
        }

        .chat-card {
          background: linear-gradient(
            145deg,
            rgba(15, 23, 42, 0.98),
            rgba(15, 23, 42, 0.92)
          );
          backdrop-filter: blur(30px);
          border-radius: 2rem;
          padding: 2rem;
          box-shadow: 0 35px 90px rgba(15, 23, 42, 0.9),
                      0 0 0 1px rgba(148, 163, 184, 0.2);
          min-height: 500px;
          display: flex;
          flex-direction: column;
          position: relative;
          overflow: hidden;
          animation: chatFadeIn 0.6s ease-out 0.3s both;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .chat-card::before {
          content: "";
          position: absolute;
          inset: 0;
          border-radius: inherit;
          padding: 1px;
          background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(34, 197, 94, 0.2));
          -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
          -webkit-mask-composite: xor;
          mask-composite: exclude;
          pointer-events: none;
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .chat-card:hover::before {
          opacity: 1;
        }

        .chat-messages {
        height: 420px;            /* ✨ צ'אט בגובה קבוע */
        overflow-y: auto;         /* מאפשר גלילה */
        margin-bottom: 1.5rem;
        padding: 0.5rem;
        scroll-behavior: smooth;
      }


        .chat-messages::-webkit-scrollbar {
          width: 8px;
        }

        .chat-messages::-webkit-scrollbar-track {
          background: rgba(241, 245, 249, 0.5);
          border-radius: 999px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
          background: linear-gradient(135deg, #3b82f6, #22c55e);
          border-radius: 999px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(135deg, #2563eb, #16a34a);
        }

        .message-wrapper {
          display: flex;
          margin-bottom: 1rem;
          animation: chatSlideIn 0.4s ease-out;
        }

        .message-wrapper.bot {
          justify-content: flex-start;
        }

        .message-wrapper.user {
          justify-content: flex-end;
        }

        .message-bubble {
          max-width: 75%;
          padding: 1rem 1.2rem;
          border-radius: 1.5rem;
          font-size: 1rem;
          line-height: 1.7;
          word-wrap: break-word;
          position: relative;
          transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .message-bubble:hover {
          transform: translateY(-2px);
        }

        .message-bubble.bot {
          background: linear-gradient(135deg, rgba(30, 64, 175, 0.4), rgba(37, 99, 235, 0.3));
          border: 1px solid rgba(59, 130, 246, 0.3);
          border-bottom-right-radius: 0.3rem;
          color: #e0e7ff;
          box-shadow: 0 4px 12px rgba(15, 23, 42, 0.5);
        }

        .message-bubble.user {
          background: linear-gradient(135deg, #2563eb, #3b82f6);
          border-bottom-left-radius: 0.3rem;
          color: white;
          box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
        }

        .tip-box {
          margin-bottom: 0.8rem;
          padding: 0.9rem 1.1rem;
          border-radius: 1.2rem;
          background: linear-gradient(135deg, rgba(30, 64, 175, 0.3), rgba(37, 99, 235, 0.2));
          border: 1px solid rgba(59, 130, 246, 0.3);
          font-size: 0.9rem;
          color: #e0e7ff;
          line-height: 1.7;
          animation: chatFadeIn 0.4s ease-out;
          box-shadow: 0 4px 12px rgba(15, 23, 42, 0.5);
        }

        .tip-icon {
          display: inline-block;
          margin-left: 0.4rem;
          font-size: 1.1rem;
          animation: float 2s ease-in-out infinite;
        }

        .suggestions-container {
          display: flex;
          flex-wrap: wrap;
          gap: 0.6rem;
          margin-bottom: 0.8rem;
          animation: chatFadeIn 0.4s ease-out;
        }

        .suggestion-btn {
          border-radius: 999px;
          border: 2px solid rgba(59, 130, 246, 0.3);
          padding: 0.5rem 1.1rem;
          font-size: 0.9rem;
          background: rgba(15, 23, 42, 0.8);
          color: #e0e7ff;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 2px 8px rgba(15, 23, 42, 0.5);
        }

        .suggestion-btn:hover {
          background: linear-gradient(135deg, #2563eb, #3b82f6);
          color: white;
          border-color: #2563eb;
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
        }

        .suggestion-btn:active {
          transform: translateY(0);
        }

        .input-container {
          display: flex;
          gap: 0.8rem;
          align-items: center;
        }

        .chat-input {
          flex: 1;
          padding: 1rem 1.3rem;
          border-radius: 999px;
          border: 2px solid rgba(55, 65, 81, 0.6);
          font-size: 1rem;
          background: rgba(15, 23, 42, 0.9);
          color: #e5e7eb;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          outline: none;
        }

        .chat-input:focus {
          border-color: #3b82f6;
          box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1),
                      0 8px 25px rgba(59, 130, 246, 0.15);
          background: rgba(15, 23, 42, 1);
          transform: translateY(-2px);
        }

        .chat-input::placeholder {
          color: #6b7280;
        }

        .send-btn {
          border-radius: 999px;
          padding: 1rem 2rem;
          border: none;
          background: linear-gradient(135deg, #2563eb, #3b82f6);
          color: white;
          font-weight: 700;
          font-size: 1rem;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
          position: relative;
          overflow: hidden;
        }

        .send-btn::before {
          content: '';
          position: absolute;
          inset: 0;
          background: linear-gradient(135deg, #3b82f6, #60a5fa);
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .send-btn:hover::before {
          opacity: 1;
        }

        .send-btn:hover {
          transform: translateY(-3px) scale(1.05);
          box-shadow: 0 12px 35px rgba(37, 99, 235, 0.5);
        }

        .send-btn:active {
          transform: translateY(-1px) scale(1);
        }

        .send-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
          transform: none;
        }

        .finish-container {
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 1rem;
          padding: 1.2rem;
          border-radius: 1.2rem;
          background: linear-gradient(135deg, #ecfdf5, #d1fae5);
          border: 2px solid rgba(34, 197, 94, 0.3);
          animation: chatFadeIn 0.5s ease-out;
        }

        .finish-text {
          font-size: 1rem;
          color: #065f46;
          font-weight: 500;
          line-height: 1.6;
        }

        .finish-btn {
          border-radius: 999px;
          padding: 0.9rem 2rem;
          border: none;
          background: linear-gradient(135deg, #16a34a, #22c55e);
          color: white;
          font-weight: 700;
          font-size: 1rem;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
          position: relative;
          overflow: hidden;
        }

        .finish-btn::before {
          content: '';
          position: absolute;
          inset: 0;
          background: linear-gradient(135deg, #22c55e, #34d399);
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .finish-btn:hover::before {
          opacity: 1;
        }

        .finish-btn:hover:not(:disabled) {
          transform: translateY(-3px) scale(1.05);
          box-shadow: 0 12px 35px rgba(34, 197, 94, 0.5);
        }

        .finish-btn:disabled {
          opacity: 0.7;
          cursor: not-allowed;
        }

        .sidebar-card {
          background: linear-gradient(
            145deg,
            rgba(15, 23, 42, 0.98),
            rgba(15, 23, 42, 0.92)
          );
          backdrop-filter: blur(30px);
          border-radius: 2rem;
          padding: 2rem;
          box-shadow: 0 25px 60px rgba(15, 23, 42, 0.9),
                      0 0 0 1px rgba(148, 163, 184, 0.2);
          margin-bottom: 1.5rem;
          position: relative;
          overflow: hidden;
          animation: chatFadeIn 0.6s ease-out 0.4s both;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sidebar-card::before {
          content: '';
          position: absolute;
          inset: 0;
          border-radius: inherit;
          padding: 1px;
          background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(34, 197, 94, 0.15));
          -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
          -webkit-mask-composite: xor;
          mask-composite: exclude;
          pointer-events: none;
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .sidebar-card:hover {
          transform: translateY(-3px);
          box-shadow: 0 30px 70px rgba(15, 23, 42, 1),
                      0 0 0 1px rgba(59, 130, 246, 0.2);
        }

        .sidebar-card:hover::before {
          opacity: 1;
        }

        .sidebar-title {
          font-size: 1.3rem;
          font-weight: 800;
          margin-bottom: 1rem;
          color: #ffffff;
          display: flex;
          align-items: center;
          gap: 0.6rem;
        }

        .sidebar-title-icon {
          width: 36px;
          height: 36px;
          border-radius: 50%;
          background: linear-gradient(135deg, #2563eb, #3b82f6);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 1.1rem;
          box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .info-row {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          padding: 0.7rem 0;
          border-bottom: 1px solid rgba(226, 232, 240, 0.6);
          transition: background 0.2s ease;
        }

        .info-row:last-child {
          border-bottom: none;
        }

        .info-row:hover {
          background: rgba(30, 64, 175, 0.2);
          border-radius: 0.5rem;
          padding-left: 0.5rem;
          padding-right: 0.5rem;
        }

        .info-label {
          font-weight: 700;
          color: #9ca3af;
          font-size: 0.95rem;
        }

        .info-value {
          color: #e5e7eb;
          font-weight: 600;
          font-size: 0.95rem;
          text-align: left;
          max-width: 60%;
        }

        .summary-box {
          max-height: 300px;
          overflow-y: auto;
          padding: 1rem;
          border-radius: 1rem;
          background: rgba(15, 23, 42, 0.8);
          border: 1px solid rgba(55, 65, 81, 0.6);
          font-size: 0.95rem;
          line-height: 1.8;
          white-space: pre-wrap;
          color: #e5e7eb;
          box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .summary-box::-webkit-scrollbar {
          width: 6px;
        }

        .summary-box::-webkit-scrollbar-track {
          background: rgba(15, 23, 42, 0.5);
          border-radius: 999px;
        }

        .summary-box::-webkit-scrollbar-thumb {
          background: linear-gradient(135deg, #3b82f6, #22c55e);
          border-radius: 999px;
        }

        .summary-hint {
          font-size: 0.9rem;
          color: #64748b;
          margin-bottom: 0.8rem;
          line-height: 1.7;
          font-style: italic;
        }

        @media (max-width: 768px) {
          .chat-container {
            gap: 1.5rem;
          }

          .chat-title {
            font-size: 2rem;
          }

          .chat-card,
          .sidebar-card {
            padding: 1.5rem;
          }
        }
      